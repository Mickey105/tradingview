import{P as S,R as F,_ as b,r as g,o as r,c as h,e as i,t as l,d as y,m as C,n as p,F as T,l as E,i as _,B as k,C as L,S as se,a6 as Q,A as ne,x as ae,b as J,g as w,a3 as oe,w as le,v as Y,y as x,f as m,h as $}from"./index.8b30e6a1.js";import{g as K}from"./getCoolBalance.b48c6aca.js";import{f as ce,a as re,g as he}from"./getRegularNumber.a168e36c.js";import{I as ue}from"./InfoModal.2531ed76.js";var de={methods:{isFiat(e){try{return e.toLowerCase()==="usdt"}catch{console.warn("Seems like this.coins is not definedon instance")}}}},me={methods:{getCoolBalanceFIAT(e){return ce(this.coins[e].actual,-2).toFixed(2)}}},ge={methods:{delay:(()=>{let e={};return(t,o,a=100)=>{clearTimeout(e[t]),e[t]=setTimeout(o,a)}})()}};const _e={name:"FastBuySellWalletList",mixins:[K,S],emits:["set-pair"],computed:{...F({coins:"core/coins"}),sortedCoins(){return Object.keys(this.coins).filter(e=>!this.coins[e].disable_exchange&&!this.coins[e].disable_all)}}},X=e=>(k("data-v-01d2c8c0"),e=e(),L(),e),pe={class:"balancelist"},fe={class:"wallet__title wallet__title--left"},ye={class:"wallet-list"},be={id:"walletTabsContent",class:"tab-content"},ve={id:"my-wallets",class:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"my-wallets-tab"},xe={class:"tab-pane__row"},$e={class:"table-responsive sell-orders wallet-table",style:{"max-height":"initial"}},Ce={class:"table table-hover table-striped"},we={class:"sell-orders__td"},Se={class:"sell-orders__td"},Fe=X(()=>i("td",null,[i("div",{class:"sell-orders__td"})],-1)),Te={key:0},Ee={class:"wallet-table__td"},ke=["src","alt"],Le={class:"inline-block ml-2"},Be={class:"wallet-table__td"},De={class:"wallet-table__td"},qe=["onClick"],Pe=X(()=>i("span",{style:{padding:"0 2px"}},"/",-1)),Ie=["onClick"];function Ae(e,t,o,a,n,s){const u=g("router-link");return r(),h("div",pe,[i("div",fe,[i("span",null,l(e.$t("common.wallet")),1),y(u,{to:"/wallet",class:"link"},{default:C(()=>[i("button",{class:"btn exchange__top-up-button",style:p(e.secondColor?`background: ${e.secondColor} !important`:{})},l(e.$t("common.topupCapitalize")),5)]),_:1})]),i("div",ye,[i("div",be,[i("div",ve,[i("div",xe,[i("div",$e,[i("table",Ce,[i("thead",null,[i("tr",null,[i("td",null,[i("div",we,[i("b",null,l(e.$t("common.currency")),1)])]),i("td",null,[i("div",Se,[i("b",null,l(e.$t("quickBuy.availablebalance")),1)])]),Fe])]),s.sortedCoins.length?(r(),h("tbody",Te,[(r(!0),h(T,null,E(s.sortedCoins,c=>(r(),h("tr",{key:"coin-"+c},[i("td",null,[i("div",Ee,[i("img",{src:e.coins[c].logo.length>0?e.coins[c].logo:`/public/img/common/svgcrypto/${c.toLowerCase().trim()}.svg`,alt:c},null,8,ke),i("div",Le,l(c),1)])]),i("td",null,[i("div",Be,l(e.addSpace(e.getCoolBalance(c))),1)]),i("td",null,[i("div",De,[i("span",{class:"wallet-table__sell-buy-btn",onClick:f=>e.$emit("set-pair",{currency:c,type:"buy"})},l(e.$t("common.buy")),9,qe),Pe,i("span",{class:"wallet-table__sell-buy-btn",onClick:f=>e.$emit("set-pair",{currency:c,type:"sell"})},l(e.$t("common.sell")),9,Ie)])])]))),128))])):_("",!0)])])])])])])])}var Ne=b(_e,[["render",Ae],["__scopeId","data-v-01d2c8c0"]]);function Me(e){const t=new Q(e);if(!t.isFinite())return 0;let o=new Q(1),a=0;for(;!t.mul(o).round().dividedBy(o).equals(t);)o=o.mul(10),a++;return a}const Oe={name:"FastBuySellHistoryList",components:{Paginate:se},mixins:[S],getDecimalWLength:re,props:{curPage:{type:Number,default:1},pageCount:{type:Number,default:12}},data(){return{exchangeTimeout:null,currentPage:1}},computed:{...F({exchanges:"core/exchanges",exchangesCount:"core/exchangesCount"})},mounted(){this.getExchangeHistory()},beforeUnmount(){this.exchangeTimeout&&clearTimeout(this.exchangeTimeout)},methods:{handlePagination(e){this.currentPage=e,this.getExchangeHistory()},isFiat(e){return e==="USD"||e==="EUR"||e==="RUB"},getQuantityValue(e){return this.isFiat(e.base_currency)?this.$options.getDecimalWLength(e.quantity):this.getCoolValueForTable(e.quantity)},getCostValue(e){return this.isFiat(e.quote_currency)?this.$options.getDecimalWLength(e.cost):this.getCoolValueForTable(e.cost)},getCoolValueForTable(e){return Me(e)>8?this.addSpaceFixDecimal(e,8):e},getprettyDate(e){const t=new Date;return t.setTime(parseInt(e)),t.toLocaleString("ru-RU")},createGetExchangeHistoryLoop(){this.exchangeTimeout&&clearTimeout(this.exchangeTimeout),this.getExchangeHistory(),this.exchangeTimeout=setTimeout(this.getExchangeHistory,60*1e3)},getExchangeHistory(){this.$store.dispatch("core/getExchanges",{limit:10,offset:(this.currentPage-1)*10,st:1}),this.exchangeTimeout=setTimeout(function(){self.getExchangeHistory()},60*1e3)}}},Ve=e=>(k("data-v-429520a9"),e=e(),L(),e),ze={class:"historylist"},Ue={class:"wallet__title"},He={key:0},je={class:"walletTable"},We={class:"walletTable__header walletTable__header_data_ex"},Re={class:"walletTable__header walletTable__header_value_ex"},Ge={class:"walletTable__header walletTable__header_data_ex_1"},Qe=["data-thead"],Ye=["data-thead"],Je={class:"walletTable__amount"},Ke={class:"walletTable__column_sell"},Xe=Ve(()=>i("i",{class:"fa fa-exchange","aria-hidden":"true"},null,-1)),Ze=["data-thead"],et={key:1,class:"nodata not-information",style:{"padding-top":"30px"}},tt={class:"icon smile"},it={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 60 60",style:{width:"60px",height:"60px"}},st=ne('<path class="smile-st0" d="M44.5 43.2C40.6 38.6 36 36 30 36s-10.6 2.6-14.5 7.2c-.5.6-.4 1.5.2 2 .3.2.6.3.9.3.4 0 .8-.2 1.1-.5 3.3-3.9 7.2-6.2 12.3-6.2 5.1 0 9 2.3 12.3 6.2.3.3.7.5 1.1.5.3 0 .7-.1.9-.3.6-.5.7-1.4.2-2z" data-v-429520a9></path><path class="smile-st1" d="M30 60C13.4 60 0 46.6 0 30S13.4 0 30 0s30 13.4 30 30-13.4 30-30 30zm0-56C15.6 4 4 15.6 4 30s11.6 26 26 26 26-11.6 26-26S44.4 4 30 4z" data-v-429520a9></path><path class="smile-st1" d="M18.5 15c4.1 0 7.5 3.4 7.5 7.5S22.6 30 18.5 30 11 26.6 11 22.5s3.4-7.5 7.5-7.5z" data-v-429520a9></path><path class="smile-st3" d="M18.5 18c2.5 0 4.5 2 4.5 4.5S21 27 18.5 27 14 25 14 22.5s2-4.5 4.5-4.5z" data-v-429520a9></path><path class="smile-st1" d="M18.5 20c1.4 0 2.5 1.1 2.5 2.5S19.9 25 18.5 25 16 23.9 16 22.5s1.1-2.5 2.5-2.5zm-5.2-4.4l4.2-4.2c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-4.2 4.2c-.6.6-1.5.6-2.1 0-.6-.6-.6-1.6 0-2.1zm28.2-.6c4.1 0 7.5 3.4 7.5 7.5S45.6 30 41.5 30 34 26.6 34 22.5s3.4-7.5 7.5-7.5z" data-v-429520a9></path><path class="smile-st3" d="M41.5 18c2.5 0 4.5 2 4.5 4.5S44 27 41.5 27 37 25 37 22.5s2-4.5 4.5-4.5z" data-v-429520a9></path><path class="smile-st1" d="M41.5 20c1.4 0 2.5 1.1 2.5 2.5S42.9 25 41.5 25 39 23.9 39 22.5s1.1-2.5 2.5-2.5zm5.2-4.4l-4.2-4.2c-.6-.6-1.5-.6-2.1 0-.6.6-.6 1.5 0 2.1l4.2 4.2c.6.6 1.5.6 2.1 0 .6-.6.6-1.6 0-2.1z" data-v-429520a9></path>',7),nt=[st],at={class:"txt"};function ot(e,t,o,a,n,s){const u=g("paginate");return r(),h("div",ze,[i("div",Ue,l(e.$t("common.exchangehistory")),1),e.exchanges.length?(r(),h("div",He,[i("table",je,[i("thead",null,[i("tr",null,[i("th",We,l(e.$t("common.date")),1),i("th",Re,l(e.$t("common.gave"))+"/"+l(e.$t("common.got")),1),i("th",Ge,l(e.$t("common.price")),1)])]),i("tbody",null,[(r(!0),h(T,null,E(e.exchanges,c=>(r(),h("tr",{key:c.id},[i("td",{class:"walletTable__column walletTable__column_data","data-thead":e.$t("common.date")},l(s.getprettyDate(c.order.updated)),9,Qe),i("td",{class:"walletTable__column is-centered","data-thead":`${e.$t("common.gave")}/${e.$t("common.got")}`},[i("div",Je,[i("span",Ke,l(e.addSpace(s.getQuantityValue(c)))+" "+l(c.base_currency),1),Xe,i("span",{class:"walletTable__column_buy",style:p(e.mainColor?`color: ${e.mainColor} !important`:{})},l(e.addSpace(s.getCostValue(c)))+" "+l(c.quote_currency),5)])],8,Ye),i("td",{class:"walletTable__column","data-thead":e.$t("common.price")},l(e.addSpace(c.order.price)),9,Ze)]))),128))])]),y(u,{modelValue:n.currentPage,"onUpdate:modelValue":t[0]||(t[0]=c=>n.currentPage=c),"page-range":5,"margin-pages":0,"page-count":Math.ceil(e.exchangesCount/5)-1,"click-handler":s.handlePagination,"prev-text":"\u276E","next-text":"\u276F","container-class":`pagination pagination-custom ${o.pageCount>5?"over-pages":""}`,"page-class":"page-item page-item-custom noselect","prev-class":"page-item page-item-custom-prev noselect","next-class":"page-item page-item-custom-prev noselect","break-view-class":"page-item page-item-custom-break","break-view-text":""},null,8,["modelValue","page-count","click-handler","container-class"])])):(r(),h("div",et,[i("div",tt,[(r(),h("svg",it,nt))]),i("div",at,l(e.$t("common.nodata")),1)]))])}var lt=b(Oe,[["render",ot],["__scopeId","data-v-429520a9"]]);const ct={name:"VSelect3",directives:{clickOutside:ae.directive},props:{options:{type:Object,required:!0},value:{type:String,default:""},allCoins:{type:Array,default:()=>[]}},emits:["input"],data(){return{selected:"",opened:!1}},computed:{currentOption(){return this.optionsList.find(e=>e.selected)||this.optionsList[0]},optionsList(){let e=[];console.log("this.options",this.options);for(const[t,o]of Object.entries(this.options))e.push({id:t,selected:this.value===t||this.selected===t,title:t,icon:o.icon});return e}},methods:{closeSelect(){this.opened=!1},open(){this.opened=!this.opened},onSelect(e){this.selected=e,this.opened=!1,this.$emit("input",this.selected)}}},rt={key:0,class:"coinSelector"},ht=["src","alt"],ut={class:"coinSelector__title"},dt={key:0},mt=["onClick"],gt={class:"coinSelector__elem"},_t=["src","alt"],pt={class:"coinSelector__title"};function ft(e,t,o,a,n,s){const u=J("click-outside");return w((r(),h("div",null,[s.currentOption?(r(),h("div",rt,[i("div",{class:"selector__current",onClick:t[0]||(t[0]=(...c)=>s.open&&s.open(...c))},[i("img",{width:"50",src:o.allCoins[s.currentOption.id].logo.length>0?o.allCoins[s.currentOption.id].logo:`/public/img/common/svgcrypto/${s.currentOption.id.toLowerCase()}.svg`,alt:s.currentOption.id.toUpperCase(),class:"mCS_img_loaded walletTable__item_img coinSelector__img"},null,8,ht),i("span",ut,l(s.currentOption.title),1)]),n.opened?(r(),h("ul",dt,[(r(!0),h(T,null,E(s.optionsList,c=>(r(),h("li",{key:c.id,onClick:f=>s.onSelect(c.id)},[i("div",gt,[i("img",{width:"50",src:o.allCoins[c.id].logo.length>0?o.allCoins[c.id].logo:`/public/img/common/svgcrypto/${c.id.toLowerCase()}.svg`,alt:c.id.toUpperCase(),class:"mCS_img_loaded walletTable__item_img coinSelector__img"},null,8,_t),i("span",pt,l(c.title),1)])],8,mt))),128))])):_("",!0)])):_("",!0)])),[[u,s.closeSelect]])}var yt=b(ct,[["render",ft],["__scopeId","data-v-507ed8b4"]]),Z="/public/img/common/arrow.svg";const bt={name:"QuickBuySell",metaInfo(){return{title:this.$t("pages.titles.quick_buy_sell"),meta:[{name:"description",content:this.$t("pages.quickbuysellDescription")}]}},components:{FastBuySellHistoryList:lt,FastBuySellWalletList:Ne,Select3:yt},mixins:[S,he,de,K,me,ge],data(){return{preventDisabledExchangeMsg:!1,exchangeDisabled:!1,receiveAmount:0,balanceSum:0,cur1:"BTC",cur2:"USDT",give:null,get:null,pricetop:1,operation:0,maintimer:null,exchangePending:!1,times:!1,ignoreChangeCur1:!1,ignoreChangeCur2:!1,badLimits:!0,stop:!1}},computed:{...F({balance:"core/balance",coins:"core/coins",user_notification:"core/user_notification",isLoggedIn:"core/isLoggedIn"}),isAuthorized(){return this.$store.getters["core/isAuthorized"]},filteredCoins(){return Object.fromEntries(Object.entries(this.coins).filter(([,e])=>!e.disable_all&&!e.disable_exchange))},activeCoinsSelect3(){return Object.keys(this.filteredCoins).reduce((e,t)=>({...e,[t]:t}),{})},relatedCoinsSelect3(){const e={};let t=this.coins[this.cur1];return t!=null&&t.pairs&&Object.keys(t.pairs).map(o=>{let a=t.pairs[o];!this.coins[a.base].disable_all&&!this.coins[a.base].disable_exchange&&!this.coins[a.quote].disable_all&&!this.coins[a.quote].disable_exchange&&(a.quote!==this.cur1&&(e[a.quote]=a.quote),a.base!==this.cur1&&(e[a.base]=a.base))}),e},exchangeFee(){var e;if(this.receiveAmount){let t=this.receiveAmount*this.coins[this.cur2].fee.exchange.value;return t=this.getFixedDecimal(t,((e=this.coins[this.cur2])==null?void 0:e.decimals)||8),this.getRegularNumber(t)}return 0},currentBalance(){const e=this.isFiat(this.cur1),t=this.coins[this.cur1];return t!=null&&t.actual?e?this.getCoolBalanceFIAT(this.cur1):this.getCoolBalance(this.cur1):0},currentBalanceEx(){const e=this.isFiat(this.cur2),t=this.coins[this.cur2];return t!=null&&t.actual?e?this.getCoolBalanceFIAT(this.cur2):this.getCoolBalance(this.cur2):0},cur1notEnough(){return this.getFixedDecimal(this.currentBalance)<this.give},cur2notEnough(){return this.getFixedDecimal(this.currentBalance)<this.get},limits(){var o,a,n,s;const e=this.coins[this.cur1],t={};return e&&(t.min=(a=(o=e==null?void 0:e.limits)==null?void 0:o.order)==null?void 0:a.min,t.max=(s=(n=e==null?void 0:e.limits)==null?void 0:n.order)==null?void 0:s.max),t},limitsEx(){var o,a,n,s;const e=this.coins[this.cur2],t={};return e&&(t.min=(a=(o=e==null?void 0:e.limits)==null?void 0:o.order)==null?void 0:a.min,t.max=(s=(n=e==null?void 0:e.limits)==null?void 0:n.order)==null?void 0:s.max),t},settledAmount(){const e=this.isFiat(this.cur2)?2:8;return(this.getFixedDecimal(this.receiveAmount,e)-this.getFixedDecimal(this.exchangeFee,e)).toFixed(e)}},watch:{isAuthorized(e){e===void 0&&location.reload()},cur1(){if(this.give=null,this.get=null,this.ignoreChangeCur1)return;this.delayProcessExchange();const e=Object.keys(this.relatedCoinsSelect3)[0];this.relatedCoinsSelect3[this.cur2]||(this.cur2=e)},cur2(){this.ignoreChangeCur2||(this.give=null,this.get=null,this.delayProcessExchange())},give(e){this.stop||(typeof e=="string"&&e.includes(",")&&(this.give=e.replace(",",".")),this.delayProcessExchange("giveChange"))},get(e){this.stop||(typeof e=="string"&&e.includes(",")&&(this.get=e.replace(",",".")),this.delayProcessExchangeEx("getChange"))},user_notification(e){e.length&&this.$modal.show(ue,{},{adaptive:!0,height:"auto",scrollable:!0,width:500})}},mounted(){var e,t,o,a;this.$store.dispatch("core/getCoinsLimits"),this.updateBalance(),this.$store.dispatch("core/getPairs"),this.$store.dispatch("core/getUserNotifications"),this.processexchange(0),this.$route.query.type&&this.$route.query.type==="sell"&&(this.ignoreChangeCur1=!0,this.cur1=(e=this.$route.query)==null?void 0:e.coin1,this.cur2=(t=this.$route.query)==null?void 0:t.coin2,this.$route.query.val&&(setTimeout(()=>{this.give=this.$route.query.val},2e3),this.delayProcessExchange("giveChange")),this.ignoreChangeCur2=!1),this.$route.query.type&&this.$route.query.type==="buy"&&(this.ignoreChangeCur1=!0,this.cur1=(o=this.$route.query)==null?void 0:o.coin1,this.cur2=(a=this.$route.query)==null?void 0:a.coin2,setTimeout(()=>{this.ignoreChangeCur1=!1},1e3))},beforeUnmount(){this.maintimer&&clearTimeout(this.maintimer)},methods:{...oe(["getNotifications"]),delayProcessExchange(e="pairChange"){this.delay(e,()=>{this.maintimer&&clearTimeout(this.maintimer),this.processexchange(),this.cur1notEnough&&(this.get=null)},400)},delayProcessExchangeEx(e="pairChange"){this.delay(e,()=>{this.maintimer&&clearTimeout(this.maintimer),this.processexchangeEx(),this.cur2notEnough&&(this.give=null)},400)},swapPairs(){const e=this.cur1;this.cur1=this.cur2,this.cur2=e},setPair({currency:e,type:t}){if(this.coins[e].disable_exchange){this.$notify({type:"error",text:this.$t("common.pairExchangeDisabled",{currency:e})});return}const o=this.filteredCoins[e].pairs,a=o[Object.keys(o)[0]];t==="sell"?(this.ignoreChangeCur1=!0,this.cur1=e,this.ignoreChangeCur1=!1,setTimeout(()=>{this.cur2=e==a.base?a.quote:a.base},10)):(this.ignoreChangeCur1=!0,this.cur1=e===a.base?a.quote:a.base,this.ignoreChangeCur1=!1,setTimeout(()=>{this.cur2=e},10))},setCur1AmountPercentHandler(e){const t=this.getFixedDecimal(this.currentBalance)/100*e;this.processexchange(t,e)},checkAndSetAmount(e,t=null){if(e=this.getFixedDecimal(e),Number.isNaN(e)||e===0)return!1;if(t&&this.give!==e&&(this.give=e),this.isLoggedIn){const{min:o,max:a}=this.limits;let n="";return e>=o&&this.currentBalance>=o&&e<=a?(this.badLimits=!1,!0):e>a?(this.badLimits=!0,t?n=this.$t("common.quantityIsGreaterThanMax",{selectedPercent:t,maxLimit:a,currency:this.cur1}):n=this.$t("common.quantityIsTooBig"),this.$notify({type:"warning",text:n,duration:1e4}),!0):e<o&&this.currentBalance>o?(this.badLimits=!0,t?n=this.$t("common.quantityIsLowerThanMin",{selectedPercent:t,minLimit:a,currency:this.cur1}):n=this.$t("common.quantityIsTooLow"),this.$notify({type:"warning",text:n,duration:1e4}),!0):(this.badLimits=!1,this.$notify({type:"warning",text:this.$t("common.notEnoughForExchange"),duration:5e3}),!1)}},checkAndSetAmountEx(e,t=null){if(e=this.getFixedDecimal(e),Number.isNaN(e)||e===0)return!1;if(t&&this.get!==e&&(this.get=e),this.isLoggedIn){const{min:o,max:a}=this.limitsEx;let n="";return e>=o&&this.currentBalanceEx>=o&&e<=a?(this.badLimits=!1,!0):e>a?(this.badLimits=!0,t&&(n=this.$t("common.quantityIsGreaterThanMax",{selectedPercent:t,maxLimit:a,currency:this.cur2}),this.$notify({type:"warning",text:n,duration:1e4})),!0):e<o&&this.currentBalanceEx>o?(this.badLimits=!0,t?n=this.$t("common.quantityIsLowerThanMin",{selectedPercent:t,minLimit:a,currency:this.cur2}):n=this.$t("common.quantityIsTooLow"),this.$notify({type:"warning",text:n,duration:1e4}),!0):(this.badLimits=!1,this.$notify({type:"warning",text:this.$t("common.notEnoughForExchange"),duration:5e3}),!1)}},getCoolPrice(e){const t=parseFloat(e);return t<1?t.toFixed(8):t<100?t.toFixed(7):t<1e3?t.toFixed(6):t<1e4?t.toFixed(5):t<1e5?t.toFixed(4):t<1e6?t.toFixed(3):t.toFixed(1)},drawSuccess(e,t,o,a,n){const s=this;e==="succ"?s.$notify({type:"success",title:s.$t("common.exchange_done"),text:`${s.$t("common.amount_short")}: ${t} ${o} ${s.$t("common.to")} ${n} ${a}`}):e==="no"?s.$notify({type:"error",title:s.$t("common.not_done"),text:`${s.$t("common.amount_short")}: ${t} ${o} ${s.$t("common.to")} ${a}`}):e==="cancelled"&&s.$notify({type:"error",title:s.$t("common.not_done"),text:s.$t("common.order_cancelled")})},async doIT(){if(this.give===""||this.exchangePending)return;this.exchangePending=!0;let e=!0;if(e){try{const t=await this.$http.post("exchange/",{base_currency:this.cur1,quote_currency:this.cur2,operation:this.operation,quantity:this.give});if(Object.keys(t.data).length===0)throw"no";if(t.data.order.state===2)throw"cancelled";this.getNotifications(),this.drawSuccess("succ",this.give,this.cur1,this.cur2,t.data.cost),this.updateBalance(),this.give=null,this.get=null,this.receiveAmount=0}catch(t){t==="cancelled"?this.drawSuccess("cancelled",this.give,this.cur1,this.cur2,""):this.drawSuccess("no",this.give,this.cur1,this.cur2,"")}finally{e=!1}this.$refs.history.getExchangeHistory()}this.exchangePending=!1},disableExchange(e){if(!this.preventDisabledExchangeMsg){const t=this;this.preventDisabledExchangeMsg=!0,e&&this.$notify({type:"error",text:this.$t("common.exchangeDisabled")}),setTimeout(()=>{t.preventDisabledExchangeMsg=!1},1e3)}this.exchangeDisabled=!0},disableExchangeEx(){if(!this.preventDisabledExchangeMsg){const e=this;this.preventDisabledExchangeMsg=!0,this.get!==null&&this.get!==void 0&&this.get>0&&this.$notify({type:"error",text:this.$t("common.exchangeDisabled")}),setTimeout(()=>{e.preventDisabledExchangeMsg=!1},1e3)}this.exchangeDisabled=!0},enableExchange(){this.exchangeDisabled=!1},processexchange(e=this.give,t=null){if(this.stop=!0,!this.checkAndSetAmount(e,t)&&Number.isNaN(e))return;const o=2e4,a=1;let n=1e-6;this.maintimer&&clearTimeout(this.maintimer),this.give!==""&&this.getFixedDecimal(this.give)>0&&(n=this.getFixedDecimal(this.give)),this.operation=a,this.stop&&this.$http.put("exchange/",{base_currency:this.cur1,quote_currency:this.cur2,operation:a,quantity:n}).then(s=>{var u;s.data.disable_exchange?this.disableExchange(this.give!==null&&this.give!==void 0&&this.give>0):this.enableExchange(),s.data.cost*1===0&&(this.disableExchange(!1),this.$notify({type:"warning",text:this.$t("common.instant_exchange")})),!this.give||this.give===""||this.getFixedDecimal(this.give)===0?(this.get="",this.receiveAmount=0):(this.receiveAmount=s.data.cost?this.getFixedDecimal(s.data.cost,((u=this.coins[this.cur2])==null?void 0:u.decimals)||8):"0.0",this.get=this.receiveAmount),s.data.price?this.pricetop=s.data.price:(this.pricetop=0,!this.times&&this.balance[this.cur1]&&this.balance[this.cur1].actual>this.getFixedDecimal(this.give)&&(this.times=!0,this.$notify({type:"warning",text:this.$t("common.instant_exchange")}),setTimeout(()=>{this.times=!1},3e3))),this.maintimer=setTimeout(()=>{this.processexchange()},o)},s=>{var u;this.get=null,this.badLimits=!0,(u=s==null?void 0:s.data)!=null&&u.non_field_errors?s.data.non_field_errors[0]==="suitable pair not found"&&this.$notify({type:"warning",text:this.$t("common.notSuitablePair")}):(this.disableExchange(!1),this.$notify({type:"warning",text:this.$t("common.instant_exchange")}))}).finally(()=>{this.stop=!1})},processexchangeEx(e=this.get,t=null){if(this.stop=!0,!this.checkAndSetAmountEx(e,t)&&Number.isNaN(e))return;const o=2e4,a=1;let n=1e-6;this.maintimer&&clearTimeout(this.maintimer),this.give!==""&&this.getFixedDecimal(this.get)>0&&(n=this.getFixedDecimal(this.get)),this.operation=a,this.stop&&this.$http.put("exchange/",{base_currency:this.cur2,quote_currency:this.cur1,operation:a,quantity:n}).then(s=>{s.data.disable_exchange?this.disableExchangeEx():this.enableExchange(),!this.get||this.get===""||this.getFixedDecimal(this.get)===0?(this.give="",this.receiveAmount=0):(this.receiveAmount=s.data.cost?this.getCoolPrice(s.data.cost):"",this.give=this.receiveAmount),s.data.price?this.pricetop=s.data.price:(this.pricetop=0,!this.times&&this.balance[this.cur2]&&this.balance[this.cur2].actual>this.getFixedDecimal(this.get)&&(this.times=!0,this.$notify({type:"warning",text:this.$t("common.instant_exchange")}),setTimeout(()=>{this.times=!1},3e3))),this.maintimer=setTimeout(()=>{this.processexchangeEx()},o)},s=>{this.give=null,this.badLimits=!0,s.data.non_field_errors&&s.data.non_field_errors[0]==="suitable pair not found"&&this.$notify({type:"warning",text:this.$t("common.notSuitablePair")})}).finally(()=>{this.stop=!1})},updateBalance(){this.$store.dispatch("core/getBalance")},updateTable(){this.updateBalance()}}},v=e=>(k("data-v-4789e732"),e=e(),L(),e),vt={key:0},xt={class:"fastBuy-wpapper md:grid gap-2 xl:grid-cols-2 xl:gap-4"},$t={class:""},Ct={class:"exchange"},wt={class:"wallet__title exchange__title font-bold",style:{"margin-top":"0","min-width":"295px"}},St={class:"exchangeFormWrap",style:{"margin-bottom":"0","margin-top":"0"}},Ft={class:"exchange__input-wrapper"},Tt={class:"exchange__input-options"},Et={for:"give",class:"exchange__label"},kt={class:"exchange__input-select-container"},Lt=["fractional"],Bt={class:"exchange__limits"},Dt={class:"blue-number"},qt=["src"],Pt=v(()=>i("span",{class:"cur-separator"},"|",-1)),It={class:"blue-number"},At=["src"],Nt={class:"flex justify-center w-full"},Mt=v(()=>i("img",{class:"simple-ad-search__arrow-down",src:Z},null,-1)),Ot=v(()=>i("img",{class:"simple-ad-search__arrow-top",src:Z},null,-1)),Vt=[Mt,Ot],zt={class:"exchangeFormWrap",style:{"margin-bottom":"0px","margin-top":"5px"}},Ut={class:"exchange__input-wrapper"},Ht={class:"exchange__label"},jt={class:"exchange__input-select-container"},Wt={class:"exchange__fee-hint"},Rt={class:"blue-number"},Gt=["src"],Qt=v(()=>i("div",{class:"exchange__balance exchange__balance_second"},[i("span")],-1)),Yt={class:"alert-container"},Jt={class:"flex w-full justify-center"},Kt=["disabled"],Xt={key:0,class:"loader exchangeForm__img",style:{margin:"auto"}},Zt={class:"w-full"};function ei(e,t,o,a,n,s){var B,D,q,P,I,A,N,M,O,V,z,U,H,j,W,R,G;const u=g("FastBuySellWalletList"),c=g("select-3"),f=g("router-link"),ee=g("Select3"),te=g("FastBuySellHistoryList"),ie=J("numeric");return n.cur1!==""&&n.cur2!==""?(r(),h("div",vt,[i("div",xt,[y(u,{onSetPair:s.setPair},null,8,["onSetPair"]),i("div",$t,[i("div",Ct,[i("div",{class:"exchangeNow",style:p(e.secondColor?`background: ${e.secondColor} !important`:{})}," 1 "+l(n.cur1)+" = "+l(e.addSpaceFixDecimal(n.pricetop,((B=e.coins[n.cur2])==null?void 0:B.decimals)||8))+" "+l(n.cur2),5),i("div",wt,l(e.$t("common.instantexchange")),1),i("form",{class:"exchangeForm",novalidate:"",onSubmit:t[6]||(t[6]=le(()=>{},["prevent"]))},[i("div",St,[i("span",Ft,[i("span",Tt,[i("label",Et,l(e.$t("common.i_give"))+":",1)]),i("div",kt,[w(i("input",{id:"give","onUpdate:modelValue":t[0]||(t[0]=d=>n.give=d),fractional:((D=e.coins[n.cur1])==null?void 0:D.decimals)||8,class:"exchangeForm__input exchange__input",type:"text"},null,8,Lt),[[Y,n.give],[ie,void 0,void 0,{number:!0,decimal:!0,fractional:!0}]]),s.activeCoinsSelect3[n.cur1]?(r(),x(c,{key:0,name:"cur_1",value:n.cur1,options:s.activeCoinsSelect3,class:"qExchangeSelect","all-coins":e.coins,onInput:t[1]||(t[1]=d=>n.cur1=d)},null,8,["value","options","all-coins"])):_("",!0)]),i("p",Bt,[m(l(e.$t("common.min"))+": ",1),i("span",Dt,l((q=s.limits)==null?void 0:q.min),1),i("img",{class:"relative ml-2 inline-block",style:{top:"-2px"},width:"13",src:((A=(I=(P=e.coins)==null?void 0:P[n.cur1])==null?void 0:I.logo)==null?void 0:A.length)>0?(M=(N=e.coins)==null?void 0:N[n.cur1])==null?void 0:M.logo:`/public/img/coin/${n.cur1.toLowerCase()}.svg`,alt:""},null,8,qt),m(" "+l(n.cur1)+" ",1),Pt,m(" "+l(e.$t("common.max"))+": ",1),i("span",It,l((O=s.limits)==null?void 0:O.max),1),i("img",{class:"relative ml-2 inline-block",style:{top:"-2px"},width:"13",src:((U=(z=(V=e.coins)==null?void 0:V[n.cur1])==null?void 0:z.logo)==null?void 0:U.length)>0?(j=(H=e.coins)==null?void 0:H[n.cur1])==null?void 0:j.logo:`/public/img/coin/${n.cur1.toLowerCase()}.svg`,alt:""},null,8,At),m(" "+l(n.cur1),1)]),i("p",{class:$([{"exchange__not-enough--visible":s.cur1notEnough},"exchange__not-enough"])},[m(l(e.$t("common.not_enough"))+" "+l(n.cur1)+": ",1),y(f,{to:"/wallet",class:"link"},{default:C(()=>[m(l(e.$t("common.topup")),1)]),_:1})],2)])]),i("div",Nt,[i("div",{class:"simple-ad-search__arrows simple-ad-search__arrows_button",style:p(e.mainColor?`background: ${e.mainColor} !important`:{}),onClick:t[2]||(t[2]=(...d)=>s.swapPairs&&s.swapPairs(...d))},Vt,4)]),i("div",zt,[i("span",Ut,[i("label",Ht,l(e.$t("common.i_get"))+": ",1),i("div",jt,[w(i("input",{id:"get","onUpdate:modelValue":t[3]||(t[3]=d=>n.get=d),class:$(["exchangeForm__input exchange__input",{"exchange__input--zero-value":!n.receiveAmount}]),type:"text"},null,2),[[Y,n.get]]),s.relatedCoinsSelect3[n.cur2]?(r(),x(ee,{key:0,name:"cur_2",value:n.cur2,options:s.relatedCoinsSelect3,class:"qExchangeSelect","all-coins":e.coins,onInput:t[4]||(t[4]=d=>n.cur2=d)},null,8,["value","options","all-coins"])):_("",!0)]),i("p",Wt,[m(l(e.$t("common.fee"))+": ",1),i("span",Rt,l(s.exchangeFee),1),i("img",{class:"relative ml-2 inline-block",style:{top:"-2px"},width:"13",src:((G=(R=(W=e.coins)==null?void 0:W[n.cur2])==null?void 0:R.logo)==null?void 0:G.length)>0?e.coins[n.cur2].logo:`/public/img/coin/${n.cur2.toLowerCase()}.svg`,alt:""},null,8,Gt),m(" "+l(n.cur2),1)])])]),Qt,i("div",Yt,[i("p",null,l(e.$t("quickBuy.allertmsg1")),1),i("p",null,l(e.$t("quickBuy.allertmsg2")),1)]),i("div",Jt,[e.isLoggedIn?(r(),h("button",{key:1,class:$([{"exchange__button--pending":n.exchangePending,"exchange__button--normal":!n.exchangePending},"exchange__button exchangeForm__button"]),disabled:n.give<=0||n.exchangePending||n.badLimits||n.exchangeDisabled||s.cur1notEnough,type:"button",style:p(e.mainColor?`background: ${e.mainColor} !important`:{}),onClick:t[5]||(t[5]=(...d)=>s.doIT&&s.doIT(...d))},[m(l(n.exchangePending?"":e.$t("quickBuy.to_exchange"))+" ",1),n.exchangePending?(r(),h("div",Xt)):_("",!0)],14,Kt)):(r(),x(f,{key:0,to:"/login/"},{default:C(()=>[i("button",{class:"exchange__button--normal exchange__button exchangeForm__button",style:p(e.mainColor?`background: ${e.mainColor} !important`:{})},l(e.$t("common.login")),5)]),_:1}))])],32)])])]),i("div",null,[i("div",Zt,[y(te,{ref:"history"},null,512)])])])):_("",!0)}var ai=b(bt,[["render",ei],["__scopeId","data-v-4789e732"]]);export{ai as default};
