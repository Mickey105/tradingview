import{M as I}from"./ModalPagesHeader.a711d36d.js";import{R as w}from"./vue-recaptcha.es.34e22086.js";import{_ as C,r as m,b as $,o as l,c as u,d as c,e as o,F as _,n as a,t as r,w as g,g as h,v as f,h as S,i as v,B,C as T}from"./index.8b30e6a1.js";import"./MainLogo.14cfea8b.js";const D={name:"ForgotPassword",components:{ModalPagesHeader:I,VueRecaptcha:w},metaInfo(){return{title:this.$t("pages.titles.forgot"),meta:[{name:"description",content:`${this.localConfig.project_title} ${this.$t("pages.forgotDescription")}`}]}},data(){return{username:"",errorsemail:!1,showBanner:!1,formstatus:"pending",secretkeyToDisable:"",captchaIsON:!0,dangertext2fa:"",dangertext:"",is2Fa:"",captcha:""}},beforeCreate:function(){localStorage.getItem("token")&&this.$router.push("/trade/BTC-USDT")},methods:{validateData(){let e=0;return this.username.length?this.errorsemail=!1:(this.errorsemail=!0,e=e+1),e===0},handleRecoveryCaptcha(e,t){this.is2Fa=e,this.captcha=t},handleRecovery(){let e=this.is2FA?"dangertext2fa":"dangertext";if(this.validateData()){let t={email:this.username,lang:localStorage.getItem("planguage")||"en"};this.is2FA&&(t.googlecode=this.secretkeyToDisable),this.captchaIsON&&(t.captcha=this.captcha),this.$http.post("auth/password/reset/",t).then(()=>{this[e]="",this.showBanner=!0},d=>{const p=this;this.showBanner=!1,d.status===400?(this[e]="",setTimeout(function(){this[e]=p.$t("common.wrong_data")},500)):d.data.detail?d.data.detail==="2fa failed"&&(this[e]="",this.is2FA?this.formstatus="2fa":setTimeout(function(){this[e]=p.$t("common.invalid_code")},400)):this.is2FA||(this[e]="",this.showBanner=!0)}).catch(()=>{this.resetAndShowCaptcha()})}},onExpired(){this.$refs.recaptcha.reset()},whatSiteKey(){return this.localConfig.vue_v},resetAndShowCaptcha(){this.$refs.recaptcha&&this.$refs.recaptcha.reset(),this.captchaIsON=!0}}},F=e=>(B("data-v-0e56cb1a"),e=e(),T(),e),R={class:"flex flex-col white mt-5"},V={class:"pb-3"},A={class:"text-danger"},E=["value"],M=["value"],N={class:"logIn__descr mb-2",style:{"text-align":"center"}},X={class:"text-danger text-danger--2fa"},P=["value"],z=["value"],H=F(()=>o("br",null,null,-1)),O={class:"logIn__title"},U={class:"logIn__form"},j={class:"logIn__popup logIn__popup_white-checkmark mb-5"},q=["value"];function K(e,t,d,p,s,i){const b=m("ModalPagesHeader"),y=m("vue-recaptcha"),k=$("pattern");return l(),u("div",{class:"auth forgot-password logIn pb-5",style:a(e.loginBackground?`background: ${e.loginBackground} !important`:{})},[c(b),o("div",R,[s.showBanner?(l(),u(_,{key:1},[o("div",O,r(e.$t("common.passwordrecovery")),1),o("div",U,[o("div",j,r(e.$t("common.emailins")),1)]),o("input",{class:"forgot-password__button forgot-password__button_red logIn__form__input logIn__form__input_button",style:a(e.secondColor?`background: ${e.secondColor} !important`:{}),type:"button",value:e.$t("common.back_to_login"),onClick:t[9]||(t[9]=n=>e.$router.push({name:"login"}))},null,12,q)],64)):(l(),u(_,{key:0},[o("div",{class:"logIn__title",style:a(e.loginText?`color: ${e.loginText} !important`:{})},r(e.$t("common.passwordrecovery")),5),s.formstatus==="pending"?(l(),u("form",{key:0,class:"logIn__form",onSubmit:t[4]||(t[4]=g(()=>{},["prevent"]))},[h(o("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>s.username=n),required:"",class:S([{"input-has-error":s.errorsemail},"logIn__form__input"]),type:"text",placeholder:"Email",style:{"margin-bottom":"1rem"}},null,2),[[f,s.username],[k,void 0,"email"]]),o("div",V,[c(y,{ref:"recaptcha",sitekey:e.localConfig.recaptcha_site_key,onVerify:t[1]||(t[1]=n=>i.handleRecoveryCaptcha(!1,n)),onExpired:i.onExpired},null,8,["sitekey","onExpired"])]),o("p",A,r(s.dangertext),1),o("input",{id:"mainbtn",class:"forgot-password__button logIn__form__input logIn__form__input_button",style:a(e.mainColor?`background: ${e.mainColor} !important`:{}),type:"submit",value:e.$t("common.continue"),onClick:t[2]||(t[2]=(...n)=>i.handleRecovery&&i.handleRecovery(...n))},null,12,E),o("input",{class:"forgot-password__button forgot-password__button_red logIn__form__input logIn__form__input_button",style:a(e.secondColor?`background: ${e.secondColor} !important`:{}),type:"button",value:e.$t("common.back_to_login"),onClick:t[3]||(t[3]=n=>e.$router.push({name:"login"}))},null,12,M)],32)):v("",!0),s.formstatus==="2fa"?(l(),u("form",{key:1,class:"logIn__form",novalidate:"",onSubmit:t[8]||(t[8]=g(()=>{},["prevent"]))},[o("div",N,r(e.$t("common.entergooglecode")),1),h(o("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>s.secretkeyToDisable=n),placeholder:"XXXXXX",class:"secretclass1 m-0",type:"text"},null,512),[[f,s.secretkeyToDisable]]),o("p",X,r(s.dangertext2fa),1),o("input",{id:"mainbtn1",class:"forgot-password__button logIn__form__input logIn__form__input_button",style:a(e.secondColor?`background: ${e.secondColor} !important`:{}),type:"submit",value:e.$t("common.continue"),onClick:t[6]||(t[6]=()=>i.handleRecovery(!0))},null,12,P),o("input",{class:"forgot-password__button forgot-password__button_red logIn__form__input logIn__form__input_button",style:a(e.secondColor?`background: ${e.secondColor} !important`:{}),type:"button",value:e.$t("common.back_to_login"),onClick:t[7]||(t[7]=n=>e.$router.push({name:"login"}))},null,12,z)],32)):v("",!0),H,o("div",null,r(e.$t("common.freeze")),1)],64))])],4)}var W=C(D,[["render",K],["__scopeId","data-v-0e56cb1a"]]);export{W as default};
